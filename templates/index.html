<script>
    // أضف هذه الوظائف داخل الـ script للتأكد من الربط
    function createRoom() {
        myRoom = document.getElementById('r-id').value;
        if(!myRoom) return alert("ادخل رقم الغرفة سيدي");
        socket.emit('create_room', {room: myRoom});
    }

    socket.on('status', (data) => {
        alert(data.msg);
    });

    function joinRoom() {
        myName = document.getElementById('p-name').value;
        myRoom = document.getElementById('r-id').value;
        if(!myName || !myRoom) return alert("اكمل البيانات سيدي");
        socket.emit('join_game', {room: myRoom, name: myName, color: myColor});
    }

    socket.on('join_success', (data) => {
        if(data.success) {
            document.getElementById('lobby').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            renderBoard();
        } else {
            alert(data.msg);
        }
    });

    // التأكد من استلام التحديثات من الغرفة
    socket.on('update_game', (game) => {
        console.log("تحديث اللعبة مستلم سيدي");
        updateUI(game);
    });
</script>
