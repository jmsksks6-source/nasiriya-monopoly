<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø°ÙŠ Ù‚Ø§Ø± Ø³ÙŠØ¯ÙŠ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: sans-serif; background: #2c3e50; color: white; text-align: center; }
        #game-board { 
            display: grid; grid-template-columns: repeat(5, 100px); 
            grid-template-rows: repeat(5, 100px); gap: 5px; 
            margin: 20px auto; width: 520px; background: #ecf0f1; padding: 10px; border-radius: 10px;
        }
        .cell { background: #95a5a6; border: 2px solid #7f8c8d; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #2c3e50; font-weight: bold; position: relative; }
        .player-token { width: 20px; height: 20px; background: red; border-radius: 50%; position: absolute; bottom: 5px; }
        #controls { margin-top: 20px; background: #34495e; padding: 20px; border-radius: 10px; display: inline-block; }
        button { padding: 10px 20px; font-size: 18px; cursor: pointer; background: #e67e22; border: none; color: white; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>!ØªÙ… ØªØ´ØºÙŠÙ„ Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø°ÙŠ Ù‚Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ Ø³ÙŠØ¯ÙŠ</h1>
    <div id="status">Ø§Ù„Ù„Ø§Ø¹Ø¨: <span id="p-name">...</span> | Ø§Ù„Ø£Ù…ÙˆØ§Ù„: <span id="p-money">1500</span>$</div>
    
    <div id="game-board" id="board">
        </div>

    <div id="controls">
        <button onclick="rollDice()">ğŸ² Ø§Ø±Ù…Ù Ø§Ù„Ø²Ø§Ø±</button>
        <p id="dice-result">Ø§Ù„Ù†ØªÙŠØ¬Ø©: 0</p>
    </div>

    <script>
        const socket = io();
        let myName = "Ù„Ø§Ø¹Ø¨_" + Math.floor(Math.random() * 1000);
        document.getElementById('p-name').innerText = myName;

        // Ø£Ø³Ù…Ø§Ø¡ Ù…Ù†Ø§Ø·Ù‚ Ø°ÙŠ Ù‚Ø§Ø±
        const locations = ["Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©", "Ø§Ù„Ù†Ø§ØµØ±ÙŠØ©", "Ø§Ù„Ø´Ø·Ø±Ø©", "Ø§Ù„Ø±ÙØ§Ø¹ÙŠ", "Ø³ÙˆÙ‚ Ø§Ù„Ø´ÙŠÙˆØ®", "Ù‚Ù„Ø¹Ø© Ø³ÙƒØ±", "Ø§Ù„Ø¬Ø¨Ø§ÙŠØ´", "Ø§Ù„Ù†ØµØ±", "Ø§Ù„Ø¨Ø·Ø­Ø§Ø¡", "Ø§Ù„ØºØ±Ø§Ù", "Ø§Ù„ÙØ¬Ø±", "Ø£ÙˆØ± Ø§Ù„Ø¢Ø«Ø§Ø±", "Ø³Ø¬Ù† Ø§Ù„Ø­ÙˆØª", "Ø§Ù„Ø®Ø¶Ø±", "Ø§Ù„ÙÙ‡ÙˆØ¯", "Ø§Ù„Ø¥ØµÙ„Ø§Ø­"];

        const boardDiv = document.getElementById('game-board');
        locations.forEach((loc, i) => {
            let div = document.createElement('div');
            div.className = 'cell';
            div.id = 'cell-' + i;
            div.innerText = loc;
            boardDiv.appendChild(div);
        });

        socket.emit('join', {name: myName});

        function rollDice() {
            let steps = Math.floor(Math.random() * 6) + 1;
            document.getElementById('dice-result').innerText = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: " + steps;
            socket.emit('move_player', {name: myName, steps: steps});
        }

        socket.on('update_players', (players) => {
            // Ù…Ø³Ø­ Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
            document.querySelectorAll('.player-token').forEach(t => t.remove());
            // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ Ù…ÙˆØ§Ù‚Ø¹Ù‡Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            for (let id in players) {
                let p = players[id];
                let cell = document.getElementById('cell-' + p.pos);
                let token = document.createElement('div');
                token.className = 'player-token';
                if(id === myName) {
                    token.style.background = 'blue';
                    document.getElementById('p-money').innerText = p.money;
                }
                cell.appendChild(token);
            }
        });
    </script>
</body>
  </html>
