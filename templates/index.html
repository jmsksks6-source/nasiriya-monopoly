<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø°ÙŠ Ù‚Ø§Ø± - Ø§Ù„Ù…Ù„ÙƒÙŠØ©</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { margin: 0; background: #1a1a1a; color: white; font-family: 'Cairo', sans-serif; overflow: hidden; }
        #game-container { display: flex; height: 100vh; padding: 10px; box-sizing: border-box; }
        
        /* Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        .board { 
            display: grid; grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(5, 1fr);
            flex: 2; aspect-ratio: 1/1; background: #2ecc71; border: 10px solid #27ae60; position: relative;
        }

        .cell { 
            background: #ecf0f1; border: 1px solid #2c3e50; color: #2c3e50;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-weight: bold; font-size: 14px; position: relative;
        }

        /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø­ÙˆØ§Ù */
        .top { grid-row: 1; }
        .bottom { grid-row: 5; }
        .left { grid-column: 1; }
        .right { grid-column: 5; }
        .middle { background: #27ae60; border: none; } /* Ù‚Ù„Ø¨ Ø§Ù„Ø®Ø±ÙŠØ·Ø© */

        .price { color: #27ae60; font-size: 12px; }
        .icon { font-size: 24px; margin-bottom: 5px; }

        /* Ø§Ù„Ø²Ø§Ø± */
        #dice-box { 
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: #2c3e50; margin-left: 10px; border-radius: 15px; border: 4px solid #e67e22;
        }
        #dice { 
            width: 80px; height: 80px; background: white; color: black; border-radius: 10px;
            display: flex; align-items: center; justify-content: center; font-size: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); transition: transform 0.3s;
        }

        .player-token { 
            width: 25px; height: 25px; border-radius: 50%; border: 2px solid white;
            position: absolute; transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
    </style>
</head>
<body>

<div id="game-container">
    <div class="board" id="board">
        </div>

    <div id="dice-box">
        <h2 id="current-player">Ø§Ù†ØªØ¸Ø± Ø¯Ø®ÙˆÙ„Ùƒ...</h2>
        <div id="dice">?</div>
        <br>
        <button id="roll-btn" onclick="roll()" style="padding: 15px 30px; cursor: pointer; background: #e67e22; border: none; color: white; border-radius: 10px; font-size: 20px;">Ø§Ø±Ù…ÙŠ Ø§Ù„Ø²Ø§Ø± Ø³ÙŠØ¯ÙŠ ğŸ²</button>
        <div id="money-display" style="font-size: 25px; margin-top: 20px; color: #2ecc71;">ÙÙ„ÙˆØ³Ùƒ: 1500$</div>
    </div>
</div>

<script>
    const socket = io();
    let myName = "Ù„Ø§Ø¹Ø¨_" + Math.floor(Math.random() * 99);
    let myColor = '#' + Math.floor(Math.random()*16777215).toString(16);
    document.getElementById('current-player').innerText = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ: " + myName;

    const zones = [
        {name: "Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©", icon: "ğŸš©", pos: [1,1]}, {name: "Ø§Ù„Ù†Ø§ØµØ±ÙŠØ©", icon: "ğŸ¢", pos: [1,2]}, 
        {name: "Ø§Ù„Ø´Ø·Ø±Ø©", icon: "ğŸŒ¾", pos: [1,3]}, {name: "Ø§Ù„Ø±ÙØ§Ø¹ÙŠ", icon: "ğŸ•Œ", pos: [1,4]},
        {name: "Ù‚Ù„Ø¹Ø© Ø³ÙƒØ±", icon: "ğŸ°", pos: [1,5]}, {name: "Ø³ÙˆÙ‚ Ø§Ù„Ø´ÙŠÙˆØ®", icon: "ğŸ›’", pos: [2,5]},
        {name: "Ø§Ù„Ø¬Ø¨Ø§ÙŠØ´", icon: "ğŸš£", pos: [3,5]}, {name: "Ø³Ø¬Ù† Ø§Ù„Ø­ÙˆØª", icon: "â›“ï¸", pos: [4,5]},
        {name: "Ø§Ù„Ø¨Ø·Ø­Ø§Ø¡", icon: "ğŸ", pos: [5,5]}, {name: "Ø§Ù„ØºØ±Ø§Ù", icon: "ğŸ’§", pos: [5,4]},
        {name: "Ø§Ù„Ù†ØµØ±", icon: "âœŒï¸", pos: [5,3]}, {name: "Ø§Ù„ÙØ¬Ø±", icon: "ğŸŒ…", pos: [5,2]},
        {name: "Ø§Ù„Ù…Ù†Ø§Ø±", icon: "ğŸ’¡", pos: [5,1]}, {name: "Ø§Ù„ÙÙ‡ÙˆØ¯", icon: "ğŸ†", pos: [4,1]},
        {name: "Ø§Ù„Ø¥ØµÙ„Ø§Ø­", icon: "ğŸ› ï¸", pos: [3,1]}, {name: "Ø£ÙˆØ±", icon: "ğŸ›ï¸", pos: [2,1]}
    ];

    // Ø±Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø©
    const board = document.getElementById('board');
    for(let i=1; i<=5; i++) {
        for(let j=1; j<=5; j++) {
            let div = document.createElement('div');
            let zone = zones.find(z => z.pos[0] === i && z.pos[1] === j);
            if(zone) {
                div.className = 'cell';
                div.id = 'z-' + zones.indexOf(zone);
                div.innerHTML = `<span class="icon">${zone.icon}</span>${zone.name}<br><span class="price">300$</span>`;
            } else {
                div.className = 'middle';
            }
            div.style.gridRow = i; div.style.gridColumn = j;
            board.appendChild(div);
        }
    }

    socket.emit('join', {name: myName, color: myColor});

    function roll() {
        document.getElementById('roll-btn').disabled = true;
        socket.emit('roll_dice', {name: myName});
    }

    socket.on('dice_rolled', (data) => {
        let dice = document.getElementById('dice');
        dice.style.transform = "rotate(360deg)";
        setTimeout(() => {
            dice.innerText = data.value;
            dice.style.transform = "rotate(0deg)";
            updatePlayers(data.players);
            document.getElementById('roll-btn').disabled = false;
        }, 300);
    });

    function updatePlayers(players) {
        document.querySelectorAll('.player-token').forEach(t => t.remove());
        for(let id in players) {
            let p = players[id];
            let cell = document.getElementById('z-' + p.pos);
            let token = document.createElement('div');
            token.className = 'player-token';
            token.style.background = p.color;
            cell.appendChild(token);
            if(id === myName) document.getElementById('money-display').innerText = "ÙÙ„ÙˆØ³Ùƒ: " + p.money + "$";
        }
    }
</script>
</body>
    </html>
